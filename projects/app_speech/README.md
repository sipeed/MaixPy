## 1. 简介
本应用是基于MaixCAM2硬件开发的语音转文字工具，依托SenseVoice语音识别模型，支持通过长按录音按钮录制语音，并实时将录制的音频转换为文字内容，操作简单且交互直观。

## 2. 主要功能
- 语音录制：通过长按指定按钮启动音频录制，松开按钮停止录制。
- 语音转文字：停止录制后自动调用语音识别模型，将录制的音频内容转换为文字。
- 交互界面：提供可视化操作界面，清晰展示录制状态、转换结果及退出按钮。
- 硬件适配检测：启动时自动检测设备内存规格，仅支持4GB版本的MaixCAM2硬件。

## 3. 使用说明
### 3.1 启动应用
将应用部署至MaixCAM2设备后，直接运行程序即可启动，启动过程中界面会依次显示“初始化触摸屏”“加载语音识别模块”“初始化ASR模型”等加载提示，等待加载完成后进入主界面。

### 3.2 核心操作
1. **录制语音**：长按界面中间的录音图标（96×96尺寸的record.png图标），长按超过100ms后，界面文字区域显示“Recording..”，表示进入录音状态，此时开始录制语音。
2. **停止录制与转写**：松开录音图标后，界面文字区域显示“Transcribing ...”，应用自动将录制的音频转换为文字，转换完成后文字区域显示识别结果。
3. **退出应用**：点击界面左上角的退出图标（40×40尺寸的exit.jpg图标），即可退出应用程序。

### 3.3 界面说明
- 左上角：退出按钮，点击可关闭应用。
- 中间区域：录音按钮+“Long press me”提示文字，长按录音按钮启动录音。
- 下方文字区域：显示录音状态、转写状态及最终的语音转文字结果，初始显示“No text”。

## 4. 注意事项
1. **模型加载**：启动时初始化ASR模型可能耗时较长，界面会显示加载进度（1-8），需耐心等待加载完成，无需中途退出。
2. **录音操作**：录音需长按按钮超过100ms才会触发，短按不会启动录音，避免误触。
3. **文件依赖**：应用运行依赖指定路径的模型文件（/root/models/sensevoice-maixcam2/model.mud），缺失会导致运行异常。
4. **音频参数**：录音采样率固定为16000Hz、单声道，无需手动设置，修改参数可能导致转写失败。
5. **识别语言**：当前应用默认设置识别语言为英语（en），可通过修改代码中`self.language = 'en'`调整为其他支持的语言（需模型适配）。
6. **音频缓存**：录音过程中音频数据会临时存储在内存中，转写完成后自动清空，若录制过长语音可能占用较多内存，建议单次录制时长不超过1分钟。
8. **异常处理**：应用退出时会自动停止ASR模型并释放资源，避免强制退出导致资源泄漏；运行中若触发设备退出信号（app.need_exit()），也会自动清理资源后退出。
9. **交互优化**：触摸检测支持20px的偏移容错，即使未精准点击图标区域，轻微偏移也可触发对应操作，提升操作便捷性。

## 5. 更多介绍
[源码](https://github.com/sipeed/MaixPy/tree/main/projects/app_speech)

[MaixPy MaixCAM 运行 SenseVoice 模型](https://wiki.sipeed.com/maixpy/doc/zh/mllm/asr_sensevoice.html)

[MaixPy MaixCAM 运行 Whisper 模型](https://wiki.sipeed.com/maixpy/doc/zh/mllm/asr_whisper.html)